---
import BaseLayout from '../layouts/BaseLayout.astro';
import ToolPageLayout from '../components/tools/ToolPageLayout.astro';
import DomainInput from '../components/tools/DomainInput.astro';
import ActionButtons from '../components/tools/ActionButtons.astro';
import ProgressBar from '../components/tools/ProgressBar.astro';
import ResultsTable from '../components/tools/ResultsTable.astro';
// import FeaturesList from '../components/tools/FeaturesList.astro'; // Unused import

const tableColumns = [
  { key: 'domain', label: 'Domain', sortable: true },
  { key: 'monthlyVisits', label: 'Monthly Visits', sortable: true },
  { key: 'status', label: 'Status', sortable: false }
];

const features = [
  {
    icon: 'M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z',
    title: 'Bulk Traffic Checker Analysis',
    description: 'Use our traffic checker to analyze up to 50 domains simultaneously for comprehensive traffic evaluation and backlink opportunity assessment',
    iconColor: 'blue'
  },
  {
    icon: 'M13 10V3L4 14h7v7l9-11h-7z',
    title: 'Real-time Traffic Checker Insights',
    description: 'Get instant traffic metrics with our traffic checker tool, providing real-time performance data to identify valuable backlink opportunities',
    iconColor: 'green'
  },
  {
    icon: 'M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z',
    title: 'Traffic Checker Export Features',
    description: 'Export traffic checker results to CSV or JSON format for comprehensive traffic analysis and strategic backlink planning',
    iconColor: 'purple'
  }
];
---

<BaseLayout title="Traffic Checker - Free Website Traffic Analysis Tool | BacklinksBuilder">
  <ToolPageLayout 
    title="Traffic Checker - Website Traffic Analysis Tool"
    description="Use our free Traffic Checker to analyze website traffic data and evaluate competitor performance. This powerful traffic checker helps you identify high-traffic domains and assess potential backlink opportunities for effective SEO strategy."
    features={features}
  >
    <Fragment slot="tool-content">
      <!-- Quota Display -->
      <div id="quota-display" class="mb-6 p-4 bg-green-50 border border-green-200 rounded-lg">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-sm font-medium text-green-900">Traffic Checker Quota - Website Analysis</h3>
            <p id="quota-info" class="text-sm text-green-700">Loading quota information...</p>
          </div>
          <div id="quota-upgrade" class="hidden">
            <a href="/pricing" class="inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
              Upgrade Plan
            </a>
          </div>
        </div>
      </div>
      
      <DomainInput 
        id="domains"
        label="Enter Domain or URL"
        placeholder="Enter domains, one per line\nExample:\nexample.com\ngoogle.com\nbaidu.com"
        maxDomains={50}
      />
      
      <ActionButtons 
        checkButtonText="Analyze Traffic"
        checkButtonId="check-btn"
        clearButtonId="clear-btn"
        showExportButton={false}
      />
      
      <ProgressBar />
    </Fragment>
    
    <Fragment slot="results">
      <ResultsTable 
        title="Check Website Traffic"
        columns={tableColumns}
        containerId="results-section"
        tableId="results-table"
        tbodyId="results-table-body"
      />
    </Fragment>

    

  </ToolPageLayout>
</BaseLayout>

<script src="/src/scripts/quota-manager.js" is:inline></script>
<script src="/js/traffic-checker.js" is:inline></script>

<script is:inline>
  // Initialize quota display when page loads
  document.addEventListener('DOMContentLoaded', function() {
    if (typeof QuotaManager !== 'undefined') {
      const quotaManager = new QuotaManager();
      quotaManager.initPageQuota('traffic_check');
    }
  });
</script>

<style>
  .sort-asc svg {
    transform: rotate(0deg);
  }
  .sort-desc svg {
    transform: rotate(180deg);
  }
</style>